<!-- admin panel -->


<!doctype html>

<html lang="en">

  <head>

    <!-- Required meta tags -->

    <meta charset="utf-8">

    <meta name="viewport" content="width=device-width, initial-scale=1">


  <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet">
    <!-- Bootstrap CSS -->

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

   

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">

  <!-- Font Awesome -->

  <link rel="stylesheet" href="{{asset('plugins/fontawesome-free/css/all.min.css')}}">



  <!-- profile -->

  <link rel="stylesheet" href="{{asset('dist/css/profile.css')}}">

  
<!-- admin panel css link -->

  <link rel="stylesheet" href="{{asset('Admin/css/style.css')}}">
<script src="{{asset('Admin/js/image-upload.js')}}"></script>
<script src="{{asset('Admin/js/tabbings.js')}}"></script>

<!-- <link rel="stylesheet" href="Admin/css/style.css">-->
<!--<link rel="stylesheet" href="dist/css/adminlte.min.css">-->

  <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css')}}">

  <!-- Tempusdominus Bootstrap 4 -->

  <link rel="stylesheet" href="{{asset('plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css')}}">

  <!-- iCheck -->

  <link rel="stylesheet" href="{{asset('plugins/icheck-bootstrap/icheck-bootstrap.min.css')}}">

  <!-- JQVMap -->

  <link rel="stylesheet" href="{{asset('plugins/jqvmap/jqvmap.min.css')}}">

  <!-- Theme style -->

  <link rel="stylesheet" href="{{asset('dist/css/adminlte.min.css')}}">

  <!-- overlayScrollbars -->

  <link rel="stylesheet" href="{{asset('plugins/overlayScrollbars/css/OverlayScrollbars.min.css')}}">

  <!-- Daterange picker -->

  <link rel="stylesheet" href="{{asset('plugins/daterangepicker/daterangepicker.css')}}">

  <!-- summernote -->

  <link rel="stylesheet" href="{{asset('plugins/summernote/summernote-bs4.min.css')}}">

   

 

  <!-- DataTables -->

  <link rel="stylesheet" href="{{asset('plugins/datatables-bs4/css/dataTables.bootstrap4.min.css')}}">

  <link rel="stylesheet" href="{{asset('plugins/datatables-responsive/css/responsive.bootstrap4.min.css')}}">

  <link rel="stylesheet" href="{{asset('plugins/datatables-buttons/css/buttons.bootstrap4.min.css')}}">

  <!-- Font Awesome -->

  <link rel="stylesheet" href="{{asset('plugins/fontawesome-free/css/all.min.css')}}">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

 












 <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.2/js/bootstrap.bundle.min.js'></script>
  <script type="text/javascript" src="https://cdn.datatables.net/v/bs5/dt-1.10.25/datatables.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js"></script>




<!-- jQuery -->

<script src="{{asset('plugins/jquery/jquery.min.js')}}"></script>

<!-- Bootstrap 4 -->

<script src="{{asset('plugins/bootstrap/js/bootstrap.bundle.min.js')}}"></script>



<!-- DataTables  & Plugins -->

<link  href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css" rel="stylesheet">
           <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>

          
        <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js" defer></script> 









<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

<!-- jQuery -->

<script src="{{asset('plugins/jquery/jquery.min.js')}}"></script>

<!-- jQuery UI 1.11.4 -->

<script src="{{asset('plugins/jquery-ui/jquery-ui.min.js')}}"></script>

<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->

<script>

  $.widget.bridge('uibutton', $.ui.button)

</script>

<!-- Bootstrap 4 -->

<script src="{{asset('plugins/bootstrap/js/bootstrap.bundle.min.js')}}"></script>

<!-- ChartJS -->

<script src="{{asset('plugins/chart.js/Chart.min.js')}}"></script>

<!-- Sparkline -->

<script src="{{asset('plugins/sparklines/sparkline.js')}}"></script>

<!-- JQVMap -->

<script src="{{asset('plugins/jqvmap/jquery.vmap.min.js')}}"></script>

<script src="{{asset('plugins/jqvmap/maps/jquery.vmap.usa.js')}}"></script>

<!-- jQuery Knob Chart -->

<script src="{{asset('plugins/jquery-knob/jquery.knob.min.js')}}"></script>

<!-- daterangepicker -->

<script src="{{asset('plugins/moment/moment.min.js')}}"></script>

<script src="{{asset('plugins/daterangepicker/daterangepicker.js')}}"></script>

<!-- Tempusdominus Bootstrap 4 -->

<script src="{{asset('plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js')}}"></script>

<!-- Summernote -->

<script src="{{asset('plugins/summernote/summernote-bs4.min.js')}}"></script>

<!-- overlayScrollbars -->

<script src="{{asset('plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js')}}"></script>

<!-- AdminLTE App -->

<script src="{{asset('dist/js/adminlte.js')}}"></script>



<!-- AdminLTE dashboard demo (This is only for demo purposes) -->

<script src="{{asset('dist/js/pages/dashboard.js')}}"></script>

<script src="https://kit.fontawesome.com/b99e675b6e.js"></script>









   

           <title>Admin Panel</title>

  </head>

<body class="hold-transition sidebar-mini layout-fixed">

<div class="wrapper">

    @include('Admin/layouts/sidebar')

    @include('Admin/layouts/header')

    <div class="content-wrapper">

         <main class="bg-main">



         @yield('content')

         

     </main>

        </div>

    

    @include('Admin/layouts/footer')

</div>

</body>

</html>

<script>

  $.widget.bridge('uibutton', $.ui.button)

</script>



 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>

  





<!-- Bootstrap 4 -->

<script src="{{asset('plugins/bootstrap/js/bootstrap.bundle.min.js')}}"></script>



<!-- <script src="{{asset('plugins/daterangepicker/daterangepicker.js')}}"></script>  -->



     <!-- search functionality js -->



<script src="{{asset('js/adminlte.js')}}"></script>



<script src="{{asset('js/main.js')}}"></script>



<script src="//cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>

  <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script> -->

<script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<!-- datatable -->
<script>
  $(document).ready(function() {
    $('table.display').DataTable();
} );
  </script>

  <!--  <script>
    $(document).ready(function()
{
    $("#store").change(function()
    {
        var id=$(this).val();

         var sub_id=$('#sub_id').val();
        var dataString = 'id='+ id;
        
         $.ajax({
             url: "{{ url('admin/subcategory/') }}" , 
             type: "GET",  
             data:{id:id},
             success:function(data)
                {
                   // var index = data.index;
                    var sub = data.subcategory;
                    var ids = data.ids;
                    // var voucher_aval = data.voucher_aval;
                     // alert(data);
                    $('#subcategories').show();
                       $('#label_add').show();
                             $('#input__field_abc').show();

                    $('#subcategories').html('');
                    for(var i = 0; i < sub.length; i++)
                    {
                        if(ids[i]== sub_id){
                        var option = '<option value="'+ids[i]+'" selected>'+sub[i]+'</option>';
                        $('#subcategories').append(option);
                         // $('#category-Index').val(index);
                    }
                    else{
                         var option = '<option value="'+ids[i]+'">'+sub[i]+'</option>';
                        $('#subcategories').append(option);
                         // $('#category-Index').val(index);
                    }

                    }
                   
              },
          error: function (data) {
                console.log(data);
             }

        });  
    });
    var id=$(this).val();

         var sub_id=$('#sub_id').val();
        var dataString = 'id='+ id;
        
         $.ajax({
             url: "{{ url('admin/subcategory/') }}" , 
             type: "GET",  
             data:{id:id},
             success:function(data)
                {
                   // var index = data.index;
                    var sub = data.subcategory;
                    var ids = data.ids;
                    // var voucher_aval = data.voucher_aval;
                     // alert(data);
                    $('#subcategories').show();
                       $('#label_add').show();

                    $('#subcategories').html('');
                    for(var i = 0; i < sub.length; i++)
                    {
                        if(ids[i]== sub_id){
                        var option = '<option value="'+ids[i]+'" selected>'+sub[i]+'</option>';
                        $('#subcategories').append(option);
                         // $('#category-Index').val(index);
                    }
                    else{
                         var option = '<option value="'+ids[i]+'">'+sub[i]+'</option>';
                        $('#subcategories').append(option);
                         // $('#category-Index').val(index);
                    }

                    }
                   
              },
          error: function (data) {
                console.log(data);
             }

        });  
});
</script> -->

<!--  <script>-->
<!--    $(document).ready(function()-->
<!--{-->
<!--    $("#store").change(function()-->
<!--    {-->
<!--        var id=$(this).val();-->
<!--        alert(id);-->
<!--         $.ajax({-->
<!--             url: "{{ url('admin/asubcategory/') }}" , -->
<!--             type: "GET",  -->
<!--             data:{id:id},-->
<!--             success:function(data)-->
<!--                {-->
                  

<!--                    var sub = data.subcategory;-->
<!--                    var ids = data.ids;-->
                <!--//   alert(ids);-->
               
<!--                    $('#input__field_abc').show();-->
    
<!--                    $('#input__field_abc').html('');-->
               
<!--                    for(var i = 0; i < sub.length; i++)-->
<!--                    {-->
                        
<!--                          var option = '<option value="'+ids[i]+'">'+sub[i]+'</option>';-->
                        
<!--                        $('#input__field_abc').append(option);-->
                     

<!--                    },-->


                    
                  
<!--              },-->
<!--          error: function (data) {-->
<!--                console.log(data);-->
<!--             }-->

<!--        });  -->
<!--    });-->
    <!--var id=$(this).val();-->
    
<!--    var id= $('#store').val();-->
    
<!--    var product_id = $('#product_id').val();-->
    
    <!--alert(product_id);-->
        
<!--         $.ajax({-->
<!--             url: "{{ url('admin/subcategory/') }}" , -->
<!--             type: "GET",  -->
<!--             data:{id:id,product_id:product_id},-->
<!--             success:function(data)-->
<!--                {-->
<!--                    var sub = data.subcategory;-->
<!--                    var ids = data.ids;-->
<!--                    var cids = data.cids;-->
                  
<!--                    $('#input__field_abc_simple').show();-->
<!--                    $('#input__field_abc_simple').html('');-->
<!--                         var option = '<h2 class="input-heading">Category</h2>';-->
<!--                    $('#input__field_abc_simple').append(option);-->
                    
<!--                       var mainDiv = '<div class="main-div">';-->
<!--                     $('#input__field_abc_simple').append(mainDiv);-->
                  
<!--                    for(var i = 0; i < sub.length; i++)-->
<!--                    { -->
                        
<!--                        if(jQuery.inArray(ids[i],cids)!== -1){-->
                           
<!--                          var option = '<div class="addcheckbox"><input type="checkbox" id="subcategories" name="category['+ids[i]+']" value="'+ids[i]+'" checked><label>'+sub[i]+'</label></div>';-->
<!--                          $('#input__field_abc_simple .main-div').append(option);-->
                       
<!--                        }else{-->
<!--                            var option = '<div class="addcheckbox"><input type="checkbox" id="subcategories" name="category['+ids[i]+']" value="'+ids[i]+'"><label>'+sub[i]+'</label></div>';-->
<!--                            $('#input__field_abc_simple .main-div').append(option);-->
                           
<!--                        }-->

<!--                    }-->
<!--                       var mainDivClose = '</div>';-->
<!--            $('#input__field_abc_simple .main-div').append(mainDivClose);-->
                   
<!--              },-->
<!--          error: function (data) {-->
<!--                console.log(data);-->
<!--             }-->

<!--        });  -->
<!--});-->
<!--</script>-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
<script>
    $(document).ready(function()
{
    // $("#store").change(function()
    // {
    //    
     // Define a function to fetch subcategories
function fetchSubcategories(id) {
    $.ajax({
        url: "{{ url('admin/asubcategory/') }}",
        type: "GET",
        data: { id: id },
        success: function (data) {
            var sub = data.subcategory;
            var ids = data.ids;

            // Reset and show the container
            $('#input__field_abc_simple').show().html('');

            // Append the heading
            var option = '<h2 class="input-heading">Category</h2>';
            $('#input__field_abc_simple').append(option);

            // Create the select element
            var mainDiv = '<select id="subcategories" class="main-div" name="category[]" multiple aria-label="Default select example" data-live-search="true" required>';
            $('#input__field_abc_simple').append(mainDiv);

            // Populate options
            for (var i = 0; i < sub.length; i++) {
                var option = '<option value="' + ids[i] + '">' + sub[i] + '</option>';
                $('#input__field_abc_simple .main-div').append(option);
            }

            // Close the select element
            var mainDivClose = '</select>';
            $('#input__field_abc_simple .main-div').append(mainDivClose);

            // Initialize select2
            $('#subcategories').select2();
        },
        error: function (data) {
            console.log(data);
        }
    });
}

// Call the function on initial load
var initialId = $("#store").val();
fetchSubcategories(initialId);

// Call the function on change of #store
$("#store").on("change", function () {
    var id = $(this).val();
    fetchSubcategories(id);
});

    // });
  
    
    var id= $('#store1').val();
    // var id=$(this).val();
    var product_id = $('#product_id').val();
    
//   alert(id);
        
         $.ajax({
             url: "{{ url('admin/subcategory/') }}" , 
             type: "GET",  
             data:{id:id,product_id:product_id},
             success:function(data)
                {
                    var sub = data.subcategory;
                    var ids = data.ids;
                    var cids = data.cids;
                //   alert(data.cids);
                    $('#input__field_abc_simple').show();
                    $('#input__field_abc_simple').html('');
                         var option = '<h2 class="input-heading">Category</h2>';
                    $('#input__field_abc_simple').append(option);
                    
                       var mainDiv = '<select id="subcategories1" class="main-div" name="category[]" multiple aria-label="Default select example" data-live-search="true" required>';
                     $('#input__field_abc_simple').append(mainDiv);
                  
                    for(var i = 0; i < sub.length; i++)
                    { 
                        
                        if(jQuery.inArray(ids[i],cids)!== -1){
                           
                          var option = '<option value="'+ids[i]+'" selected>'+sub[i]+'</option>';
                          $('#input__field_abc_simple .main-div').append(option);
                       
                        }else{
                            var option = '<option value="'+ids[i]+'">'+sub[i]+'</option>';
                            $('#input__field_abc_simple .main-div').append(option);
                           
                        }

                    }
                       var mainDivClose = '</select>';
            $('#input__field_abc_simple .main-div').append(mainDivClose);
             $('#subcategories1').select2();
                   
              },
          error: function (data) {
                console.log(data);
             }

        });  
});
</script>
//  <script>
//     $(document).ready(function() {
//       $('#subcategories').select2();
//     });
//   </script>
<!-- ////////////////////////////////////////old bundle product////////////////// -->
<script>
    $(document).ready(function()
{
    
    $("#groupstore").change(function()
    {
        var id=$(this).val();
        // alert(id);
         $.ajax({
             url: "{{ url('admin/gsubcategory/') }}" , 
             type: "GET",  
             data:{id:id},
             success:function(data)
                {
                   
                    var sub = data.subcategory;
                    var ids = data.ids;
                    
                     var pname = data.pname;
                    var pid = data.pid;
                    
                    $('#input__field_abc').show();

                    $('#input__field_abc').html('');
                    var option = '<h2 class="input-heading category">Category</h2>';
                    $('#input__field_abc').append(option);
                    
                     var mainDiv = '<select id="subcategories1" class="main-div" name="category[]" multiple aria-label="Default select example" data-live-search="true" required>';
                     $('#input__field_abc').append(mainDiv);
                    for(var i = 0; i < sub.length; i++)
                    {
                        var option = '<option value="'+ids[i]+'">'+sub[i]+'</option>';
                        $('#input__field_abc .main-div').append(option);
                     

                    }
                    
                   
                     var mainDivClose = '</select>';
                    $('#input__field_abc .main-div').append(mainDivClose);
                   
              
                     var option = '<h2 class="input-heading product">Products</h2>';
                    $('#input__field_abc').append(option);
                      
                    
                     var mainDiv1 = '<select id="subcategories2" class="main-div1" name="gproduct[]" multiple aria-label="Default select example" data-live-search="true" required>';
                     $('#input__field_abc').append(mainDiv1);
                    for(var j = 0; j < pname.length; j++)
                    {
                        var option = '<option value="'+pid[j]+'">'+pname[j]+'</option>';
                        $('#input__field_abc .main-div1').append(option);
                     

                    }
                    var mainDivClose1 = '</select>';
            $('#input__field_abc .main-div1').append(mainDivClose1);

              $('#subcategories2').select2();
               $('#subcategories1').select2();
              },
          error: function (data) {
                console.log(data);
             }

        });  
    });
    // var id=$(this).val();
    
    var id= $('#groupstore').val();
    
    var product_id = $('#product_id').val();
// alert(id);
        
         $.ajax({
             url: "{{ url('admin/bsubcategory/') }}" , 
             type: "GET",  
             data:{id:id,product_id:product_id},
             success:function(data)
                {
                   
                    var sub = data.subcategory;
                    var ids = data.ids;
                    
                     var pname = data.pname;
                    var pid = data.pid;
                     var cids = data.cids;
                      var bids = data.bids;
                         var qty = data.qty;
                    // alert(qty);
                    $('#input__field_abc').show();

                    $('#input__field_abc').html('');


                    var option = '<h2 class="input-heading category">Category</h2>';
                    $('#input__field_abc').append(option);
                    
                     var mainDiv = '<select id="subcategories1" class="main-div" name="category[]" multiple aria-label="Default select example" data-live-search="true" required>';
                     $('#input__field_abc').append(mainDiv);
                    for(var i = 0; i < sub.length; i++)
                    { 
                        
                        if(jQuery.inArray(ids[i],cids)!== -1){
                           
                         var option = '<option value="'+ids[i]+'" selected>'+sub[i]+'</option>';
                          $('#input__field_abc .main-div').append(option);
                       
                        }else{
                            var option = '<option value="'+ids[i]+'">'+sub[i]+'</option>';
                            $('#input__field_abc .main-div').append(option);
                           
                        }

                    }
                      var mainDivClose = '</select>';
            $('#input__field_abc .main-div').append(mainDivClose);
                    
            //          var option = '<h2 class="input-heading product">Products</h2>';
            //         $('#input__field_abc').append(option);
                    
            //           var mainDiv1 = '<select id="subcategories2" class="main-div1" name="gproduct[]" multiple aria-label="Default select example" data-live-search="true" required>';
            //          $('#input__field_abc').append(mainDiv1);
            //         for(var j = 0; j < pname.length; j++)
            //         {
            //              if(jQuery.inArray(pid[j],bids)!== -1){
            //           var option = '<option value="'+pid[j]+'" selected>'+pname[j]+'</option>';
            //             $('#input__field_abc .main-div1').append(option);
            //              }else{
                             
            //                      var option = '<option value="'+pid[j]+'">'+pname[j]+'</option>';
            //             $('#input__field_abc .main-div1').append(option);
            //              }
                     

            //         }
            //         var mainDivClose1 = '</select>';
            // $('#input__field_abc .main-div1').append(mainDivClose1);


for (var k = 0; k < bids.length; k++) {
    // Product dropdown container
    var productContainer = '<div class="product-container" id="productContainer' + k + '" >';
    productContainer += '<h2 class="input-heading product">Products</h2>';
   productContainer += '<div class="subcategory-container main-sub-grid-block" >';
    productContainer += '<select id="subcategories2' + k + '" class="main-div1" name="gproduct[]" aria-label="Default select example" data-live-search="true" required>';

    // Add options to the product dropdown
    for (var j = 0; j < pname.length; j++) {
        var optionValue = pid[j];
        var optionText = pname[j];

        if (optionValue == bids[k]) {
            productContainer += '<option value="' + optionValue + '" selected>' + optionText + '</option>';
        } else {
            productContainer += '<option value="' + optionValue + '">' + optionText + '</option>';
        }
    }

    productContainer += '</select>';

    // Append input text and button after the product dropdown
    productContainer += '<input type="text" name="product_quantity[]" placeholder="product Quantity" id="textboxId' + k + '" class="form-control" value="' + qty[k] + '">';
    productContainer += '<button type="button" class="btn btn-primary addSubcategories2 removeContainer" id="addRow' + k + '" data-containerid="productContainer' + k + '">Remove</button>';

    productContainer += '</div>';
     productContainer += '</div>';

    // Append the product dropdown container to the target element
    $('#input__field_abc').append(productContainer);

    // Initialize select2 for the product dropdown
    $("#subcategories2" + k).select2();
}



//    var productsContainerr = '<div class="new-add-row-button" >';

// var buttonHTML = '<button type="button" class="new-btn"  id="addRowew" >Add</button>';

// productsContainerr += buttonHTML;

// // Close the new container div
// productsContainerr += '</div>';

// $('#input__field_abc').append(productsContainerr);


 


var counter = 0; // Initialize a counter to keep track of the sets of products

// Function to add a new set of products
function addNewProductSet() {
        counter++; // Increment the counter
    var productsContainer = '<div class="new-container" id="new_container' + counter + '">';
    var productsHeading = '<h2 class="input-heading product">Products</h2>';
    
    // Products dropdown container
    var productsDropdown = '<div class="subcategory-container main-sub-grid-block">';
    productsDropdown += '<select id="subcategories2_' + counter + '" class="main-div1" name="gproduct[]" aria-label="Default select example" data-live-search="true" required>';
    for (var j = 0; j < data.pname.length; j++) {
        var productOption = '<option value="' + data.pid[j] + '">' + data.pname[j] + '</option>';
        productsDropdown += productOption;
    }
    productsDropdown += '</select>';

    // Add a textbox
    productsDropdown += '<input type="text" name="product_quantity[]" placeholder="product Quantity" id="textboxId_' + counter + '" class="form-control">';
    
    // Add a "Remove" button
    productsDropdown += '<button type="button" class="btn btn-primary removeProductSet" data-containerid="new_container' + counter + '">Remove</button>';
    
    productsDropdown += '</div>';
    
    // Append the products dropdown container to the productsContainer
    productsContainer += productsHeading + productsDropdown + '</div>';

    // Append the entire set of products container to the target element
    $('#input__field_abc').append(productsContainer);

    // Initialize select2 for the new product dropdown
    $("#subcategories2_" + counter).select2();
}

// Add a click event for the "Add" button
$('#addRowew').on('click', function () {
    addNewProductSet();
});

$('#input__field_abc').on('click', '.removeProductSet', function () {
    var containerId = $(this).data('containerid');
    $('#' + containerId).remove();
});

// Add a click event for the Remove buttons
$('.removeContainer').on('click', function () {
    var containerId = $(this).data('containerid');
    $('#' + containerId).remove();
});


                    
                    
               $('#subcategories1').select2();
                    // $('#subcategories2').select2();
              },
          error: function (data) {
                console.log(data);
             }

        });  
});
</script>


<!-- /////////////////////////////////////////////old bundle ends/////////////////////////////// -->
<!-- /////////////////////////////////////////////////BUNDLE PRODUCT////////////////////////////////////// -->
 
 <script>
    $(document).ready(function () {


 function handleGroupstoreeChange() {
    var id = $("#groupstoree").val();

    $.ajax({
        url: "{{ url('admin/gsubcategory/') }}",
        type: "GET",
        data: { id: id },
        success: function (data) {
            populateOptions(data);
        },
        error: function (data) {
            console.log(data);
        }
    });
}

// Call the function on change of #groupstoree
$("#groupstoree").change(function () {
    handleGroupstoreeChange();
});

// Call the function on initial load
$(document).ready(function () {
    handleGroupstoreeChange();
});

        var id = $('#groupstoree').val();
        var product_id = $('#product_id').val();

        $.ajax({
            url: "{{ url('admin/bsubcategory/') }}",
            type: "GET",
            data: { id: id, product_id: product_id },
            success: function (data) {
                populateOptions(data);

                // Detect if there are selected values in the DOM
                if ($('.selected-category').length > 0 && $('.selected-product').length > 0) {
                    // Editing scenario - call the function to dynamically populate selected values
                    populateSelectedValuesDynamic();
                } else {
                    // Inserting scenario - call the function to handle the default behavior
                    handleDefaultBehavior();
                }
            },
            error: function (data) {
                console.log(data);
            }
        });

function populateOptions(data) {
    var sub = data.subcategory;
    var ids = data.ids;
    var pname = data.pname;
    var pid = data.pid;
    var cids = data.cids;
    var bids = data.bids;

// alert(bids);

    $('#input__field_abc').show();
    $('#input__field_abc').html('');

    // Category dropdown
    var categoryHeading = '<h2 class="input-heading category">Category</h2>';
    $('#input__field_abc').append(categoryHeading);

    var categoryDropdown = '<select id="subcategories1" class="main-div" name="category[]" multiple aria-label="Default select example" data-live-search="true" required>';
    for (var i = 0; i < data.subcategory.length; i++) {
        var option = '<option value="' + data.ids[i] + '">' + data.subcategory[i] + '</option>';
        categoryDropdown += option;
    }
    categoryDropdown += '</select>';
    $('#input__field_abc').append(categoryDropdown);
// for (var k = 0; k < bids.length; k++) {
    // alert(bids[k]);
    // Products dropdown
    var productsContainer = '<div class="new-container" id="new_container">';

    var productsHeading = '<h2 class="input-heading product">Products</h2>';
    productsContainer += productsHeading;

    var productsDropdown = '<div class="subcategory-container main-sub-grid-block">';
    productsDropdown += '<select id="subcategories2" class="main-div1" name="gproduct[]" aria-label="Default select example" data-live-search="true" required>';
    for (var j = 0; j < data.pname.length; j++) {
        var productOption = '<option value="' + data.pid[j] + '">' + data.pname[j] + '</option>';
        productsDropdown += productOption;
    }
    productsDropdown += '</select>';

    // Add a textbox
    productsDropdown += '<input type="text" name="product_quantity[]" placeholder="product Quantity" id="textboxId" class="form-control" >';
    productsDropdown += '<button type="button" class="btn btn-primary addSubcategories2" id="">Remove</button>';
    productsDropdown += '</div>';

    productsContainer += productsDropdown;

    // Close the new container div
    productsContainer += '</div>';

    $('#input__field_abc').append(productsContainer);
    // Create a new container
  var newContainer = '<div class="new-add-row-button new-add-btn">';
  var newContainerButton =  '<button type="button" class="new-btn" id="addRow"><svg width="13" height="12" viewBox="0 0 13 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6.78571H7.28571V11.5H5.71429V6.78571H1V5.21429H5.71429V0.5H7.28571V5.21429H12V6.78571Z" fill="white" stroke="white"></path></svg>Add</button>';


newContainer += newContainerButton;

// Close the new container div
newContainer += '</div>';

// Append the new container to the same element
$('#input__field_abc').append(newContainer);

     $('#subcategories2').select2();
// }
    // Initialize select2 for both dropdowns
    $('#subcategories1').select2();
   

    // Set selected values for both dropdowns
// Set selected values for the first dropdown
$('#subcategories1').val(cids).trigger('change.select2');

// Clear existing options and add new options to the second dropdown
// $('#subcategories2').empty();



// Assuming you have a select element with an ID 'yourSelectElement'
var selectElement = $('#subcategories2');


// Clear existing options
// selectElement.empty();

for (var j = 0; j < data.pname.length; j++) {
    var productId = data.pid[j];
    var productName = data.pname[j];

    var productOption = new Option(productName, productId);

    // Set the selected attribute if the option is in the 'bids' array
    if (bids.includes(productId)) {
        productOption.selected = true;
    }

    // Append the option to the select element
    selectElement.append(productOption);
}
// Trigger the change event on the select element
selectElement.trigger('change');


// Trigger the change event on the second dropdown to update Select2
$('#subcategories2').trigger('change.select2');



}

        function handleDefaultBehavior() {
            // Your existing code for handling default behavior
            appendNewSubcategoryContainer();
        }

        var counter = 1;

        $(document).on("click", "#addRow", function () {
            appendNewSubcategoryContainer();
        });

        $(document).on("click", ".removeRow", function () {
            var container = $(this).closest('.subcategory-container');
            container.prev('.input-heading.product').remove(); // Remove the heading
            container.remove();
        });

        function appendNewSubcategoryContainer() {
            var html = '';
            html += '<h2 class="input-heading product">Products</h2>';
            html += '<div class="subcategory-container main-sub-grid-block">';
            html += '<select id="subcategories2' + counter + '" class="main-div1" name="gproduct[]" aria-label="Default select example" data-live-search="true" required></select>';
            html += '<input type="text" name="product_quantity[]" id="textboxId" class="form-control" placeholder="product Quantity">';
            html += '<button type="button" class="btn btn-primary removeRow">Remove</button>';
            html += '</div>';

            $('#new_container').after(html);
            $('input[id="subcategories2' + counter + '"]').attr("required", "true");
            $('.main-div1').select2();

            // Copy options from subcategories1 to the newly created subcategories2
            $('#subcategories2 option').clone().appendTo('#subcategories2' + counter);

            counter++;

            // Return the newly created container for later use
            return $('.subcategory-container').last();
        }
    });
</script>

  <script>
//     $(document).ready(function()
// {
//           $('#wocommerce-button').on('click', function () {
//             alert();
//         var Status = $(this).val();
//         $.ajax({
//            url: "#" , 
//              type: "GET",  
//              data:{id:id},
//              success:function(data)
//                 {
//       }
//         });
//     });
//     });


</script>

<!-- ///////////////////////////////////////////////////////add quote//////////////////////// -->

<script type="text/javascript">
$(document).ready( function(){
     var counter = 1;
 
      $(document).on('input', '#product_quantity', function () {
            updateRunningTotal();
        });
    $('#addRow').click( function(){
          counter++;
        
 <?php
             $category = App\Models\Product::get(['id','title','sales_price']);
                    ?>
          var html = '';
            html += '<div id="inputFormRow">';
            html += '    <div class="input-group mb-3">';
            html += '        <div class="add-content">';
            html += '            <div class="add-content-flex second-add">';
            html += '                <div class="field d-flex">';
            html += '                     <div class="input__field">   <h2 class="input-heading">Product Name</h2>';
            html += '                  <select name="product_id[]" class="product product_name" id="product'+counter+'" required> <option value="">Select Products.....</option> @foreach($category as $s) <option value="{{$s->id}}">{{$s->title}}</option> @endforeach</select>';
            html += '                </div></div>';
            html += '            </div>';
            html += '            <div class="add-content-flex second-add">';
            html += '                <div class="field d-flex">';
            html += '                   <div class="input__field" id="input__field_abc_simple_product" ><h2 class="input-heading">Unit Price</h2>';
            html += '           <input id="product_price'+counter+'" class="product_price" type="text" placeholder="Product Price" name="product_price[]" required readonly> ';         
            html += '                </div></div>';
            html += '            </div>';
              html += '            <div class="add-content-flex second-add">';
            html += '                <div class="field d-flex">';
            html += '                   <div class="input__field" id="input__field_abc_simple_product" ><h2 class="input-heading">Product Quantity</h2>';
            html += '           <input id="product_quantity'+counter+'" class="product_quantity" type="text" placeholder="Product qunatity" name="product_quantity[]" required > ';         
            html += '                </div></div>';
            html += '            </div>';
            html += '            <div class="add-content-flex second-add">';
            html += '                <div class="field d-flex">';
            html += '                   <div class="input__field" id="input__field_abc_simple_product" ><h2 class="input-heading">Total</h2>';
            html += '           <input id="result'+counter+'" class="result" type="text" placeholder="total Price" name="product_total[]" readonly > ';         
            html += '                </div></div>';
            html += '            </div>';
            html += '            <div class="submit-btn">';
            html += '                <button type="button" class="new-btn remove-btn removeRow"><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.47217 10.4445L6.13867 7.11102L2.80517 10.4445L1.694 9.33336L5.0275 5.99985L1.694 2.66635L2.80517 1.55518L6.13867 4.88869L9.47218 1.55518L10.5833 2.66635L7.24984 5.99985L10.5833 9.33336L9.47217 10.4445Z" fill="#FF1010" stroke="#FF1010"/></svg>Remove</button>';
            html += '            </div>';
            html += '        </div>';
            html += '    </div>';
            html += '</div>';
         $('#newRow').append(html);
         $('input[id="product'+counter+'"]').attr("required", "true");  
          $('.product').select2();
          
          // alert(counter)
$(document).on('change', '.product_name', function () {
    var id = $(this).val();


    var currentCounter = $(this).attr('id').replace('product', '');


    $.ajax({
        url: "{{ url('admin/quatation-product/') }}",
        type: "GET",
        data: { id: id },
        success: function (data) {
            var pricee = data.price;
            var idss = data.ids;
            var stock = data.stock;

            for (var i = 0; i < pricee.length; i++) {
                $("#product_price" + currentCounter).val(pricee[i]);

                $('#product_quantity' + currentCounter).on('input', function () {
                    var inputValue = parseFloat($(this).val()) || 0;
                    if (inputValue <= stock) {
                        calculateResult(currentCounter);
                    } else {
                        alert('Product current stock value is ' + stock + '. Please add fewer items.');
                        $(this).val(stock);
                        calculateResult(currentCounter);
                    }
                    
                      updateRunningTotal();
                });

              function calculateResult(currentCounter) {
    var productPrice = parseFloat($('#product_price' + currentCounter).val()) || 0;
    var productQuantity = parseFloat($('#product_quantity' + currentCounter).val()) || 0;
    
    // Calculate the result and round to two decimal places
    var result = (productPrice * productQuantity).toFixed(2);
    
    // Update the result field
    $('#result' + currentCounter).val(result);
}

            }
        },
        error: function (data) {
            console.log(data);
        }
    });
    
     updateRunningTotal();
});


       });

    $(document).on('input', '#miscvalue', function () {
            updateRunningTotal();
        });


  $(document).on('click', '.removeRow', function() {
        $(this).closest('#inputFormRow').remove();
          updateRunningTotal();
    });
    
    
   function updateRunningTotal() {
            totalSum = 0;
            $('.result').each(function () {
                var resultValue = parseFloat($(this).val()) || 0;
                totalSum += resultValue;
            });

            // Add miscvalue to the total
            var miscvalue = parseFloat($('#miscvalue').val()) || 0;
            totalSum += miscvalue;

            $('#totalSum').val(totalSum.toFixed(2));
        }



    });



</script>

<script>
    $(document).ready(function()
{
    $(".product_name").change(function()
    {
        var id=$(this).val();
        // alert(id)
         $.ajax({
             url: "{{ url('admin/quatation-product/') }}" , 
             type: "GET",  
             data:{id:id},
             success:function(data)
                {
                   
                     var price = data.price;
                    var ids = data.ids;
                    var stock = data.stock;
                    // alert(stock);
                var totalSum = 0;
                  
                    for(var i = 0; i < price.length; i++)
                    { 
                        
                            totalSum += parseInt(price[i]);
                   
    
                    }
                    
                        // alert('Total Sum: '  totalSum);
                //   $('#product_price').val('$' + totalSum); 
               
                 $('#product_price').val(totalSum); 
                //       $('.product_quantity').on('input', function () {
                //     calculateResult();
                // });

       $('.product_quantity').on('input', function () {
    var inputValue = parseFloat($(this).val()) || 0; // Get the input value as a number
    if (inputValue <= stock) {
        calculateResult();
    } else {
        alert('Product current stock value is ' + stock + '. Please add fewer items.');
        $(this).val(stock); // Reset the input to the stock value
        calculateResult(); // Recalculate the result
    }
     updateRunningTotal();
});
                function calculateResult() {
                    var productPrice = parseFloat($('#product_price').val()) || 0;
                    var productQuantity = parseFloat($('.product_quantity').val()) || 0;
                    var result = productPrice * productQuantity;
                    $('#result').val(result);
                }
                  
              },
          error: function (data) {
                console.log(data);
             }

        });  
    });
  
    
});
</script>



<!-- ///////////////////////////////////////////add quote ends/////////////////////////////////////////////////// -->


<!-- ///////////////////////////////////////////edit quote start/////////////////////////////////////////////////// -->

<script type="text/javascript">
$(document).ready(function () {
    var counter = 1;

    // Function to calculate and display result
    function calculateAndDisplayResult(currentCounter, stock) {
        var productPrice = parseFloat($('.product_pricee' + currentCounter).val()) || 0;
        var productQuantity = parseFloat($('.product_quantityy' + currentCounter).val()) || 0;
        // var result = productPrice * productQuantity;
            var result = (productPrice * productQuantity).toFixed(2);
        // Assuming you have an element with class 'resultt' + currentCounter
        $('.resultt' + currentCounter).val(result);
    }

    // Event handler for product name change
    $(document).on('change', '.product_name', function () {
        var id = $(this).val();
        var currentCounter = $(this).data('counter'); // Assuming you have a data attribute to store the counter

        $.ajax({
            url: "{{ url('admin/quatation-product/') }}",
            type: "GET",
            data: { id: id },
            success: function (data) {
                var pricee = data.price;

                // Assuming pricee is an array of product prices
                for (var i = 0; i < pricee.length; i++) {
                    // Assuming you have an element with class 'product_pricee' + currentCounter
                    $(".product_pricee" + currentCounter).val(pricee[i]);
                    calculateAndDisplayResult(currentCounter);
                }
            },
            error: function (data) {
                console.log(data);
            }
        });
    });

    // Event handler for input changes
    $(document).on('input', '.product_quantityy', function () {
        var currentCounter = $(this).data('counter'); // Assuming you have a data attribute to store the counter
        var stock = parseFloat($(this).data('stock')) || 0; // Assuming you have a data attribute to store the stock

        var inputValue = parseFloat($(this).val()) || 0;
        if (inputValue <= stock) {
            calculateAndDisplayResult(currentCounter);
        } else {
            alert('Product current stock value is ' + stock + '. Please add fewer items.');
            $(this).val(stock);
            calculateAndDisplayResult(currentCounter);
        }
    });

    // Trigger change event for product_namee when the page loads
    $('.product_namee').trigger('change');

});

$(document).on('click', '.removeRow', function () {
    $(this).closest('#inputFormRow').remove();
});

$(document).on('change', '.product_namee', function () {
    var id = $(this).val();
    var currentCounter = $(this).attr('id').replace('product', '');

    $.ajax({
        url: "{{ url('admin/quatation-product/') }}",
        type: "GET",
        data: { id: id },
        success: function (data) {
            var pricee = data.price;
            var idss = data.ids;
            var stock = data.stock;

            for (var i = 0; i < pricee.length; i++) {
                $("#product_pricee" + currentCounter).val(pricee[i]);

                $('#product_quantityy' + currentCounter).on('input', function () {
                    var inputValue = parseFloat($(this).val()) || 0;
                    if (inputValue <= stock) {
                        calculateResult(currentCounter);
                    } else {
                        alert('Product current stock value is ' + stock + '. Please add fewer items.');
                        $(this).val(stock);
                        calculateResult(currentCounter);
                    }
                });

                function calculateResult(currentCounter) {
                    var productPrice = parseFloat($('#product_pricee' + currentCounter).val()) || 0;
                    var productQuantity = parseFloat($('#product_quantityy' + currentCounter).val()) || 0;
                    // var result = productPrice * productQuantity;
                        var result = (productPrice * productQuantity).toFixed(2);
                    $('#resultt' + currentCounter).val(result);
                }
            }
        },
        error: function (data) {
            console.log(data);
        }
    });
});

</script>
<!-- ////////////////////////////////////////////////edit quote end//////////////////////////////////// -->


<!-- ///////////////////////////////////////////edit quote start 2/////////////////////////////////////////////////// -->

<script type="text/javascript">
    $(document).ready(function() {
        
        var runningTotal = 0;
           $('.result').each(function () {
                var resultValue = parseFloat($(this).val()) || 0;
                runningTotal += resultValue;
            });

            // Add miscvalue to the total
            var miscvalue = parseFloat($('#miscvaluee').val()) || 0;
            runningTotal += miscvalue;
            
            // alert(miscvalue);

            $('#running_total').val(runningTotal.toFixed(2));
                //   alert(miscvalue);
        var counter = 1;

        $('#addRow2').click(function() {
            counter++;

            <?php
            $category = App\Models\Product::get(['id','title','sales_price']);
            ?>

            var html = '';
            html += '<div id="inputFormRow">';
            html += '    <div class="input-group mb-3">';
            html += '        <div class="add-content">';
            html += '            <div class="add-content-flex second-add">';
            html += '                <div class="field d-flex">';
            html += '                     <div class="input__field">   <h2 class="input-heading">Product Name</h2>';
            html += '                  <select name="product_id[]" class="product product_nameq" id="productt'+counter+'" required> <option value="">Select Products.....</option> @foreach($category as $s) <option value="{{$s->id}}">{{$s->title}}</option> @endforeach</select>';
            html += '                </div></div>';
            html += '            </div>';
            html += '            <div class="add-content-flex second-add">';
            html += '                <div class="field d-flex">';
            html += '                   <div class="input__field" id="input__field_abc_simple_product" ><h2 class="input-heading">Unit Price</h2>';
            html += '           <input id="product_priceee'+counter+'" class="product_price" type="text" placeholder="Product Price" name="product_price[]" required readonly> ';         
            html += '                </div></div>';
            html += '            </div>';
            html += '            <div class="add-content-flex second-add">';
            html += '                <div class="field d-flex">';
            html += '                   <div class="input__field" id="input__field_abc_simple_product" ><h2 class="input-heading">Quantity</h2>';
            html += '           <input id="product_quantityyy'+counter+'" class="product_quantity" type="text" placeholder="Product qunatity" name="product_quantity[]" required > ';         
            html += '                </div></div>';
            html += '            </div>';
            html += '            <div class="add-content-flex second-add">';
            html += '                <div class="field d-flex">';
            html += '                   <div class="input__field" id="input__field_abc_simple_product" ><h2 class="input-heading">Total</h2>';
            html += '           <input id="resulttt'+counter+'" class="result" type="text" placeholder="total Price" name="product_total[]" readonly > ';         
            html += '                </div></div>';
            html += '            </div>';
            html += '            <div class="submit-btn">';
            html += '                <button type="button" class="new-btn remove-btn removeRow" id="utton2"><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.47217 10.4445L6.13867 7.11102L2.80517 10.4445L1.694 9.33336L5.0275 5.99985L1.694 2.66635L2.80517 1.55518L6.13867 4.88869L9.47218 1.55518L10.5833 2.66635L7.24984 5.99985L10.5833 9.33336L9.47217 10.4445Z" fill="#FF1010" stroke="#FF1010"/></svg>Remove</button>';
            html += '            </div>';
            html += '        </div>';
            html += '    </div>';
            html += '</div>';
            $('#newRow').append(html);
            $('input[id="productt'+counter+'"]').attr("required", "true");  
            $('.product').select2();
            // alert(counter)
        });

        $(document).on('change', '.product_nameq', function () {
            var id = $(this).val();
            var currentCounter = $(this).attr('id').replace('productt', '');
            // alert(currentCounter);
            $.ajax({
                url: "{{ url('admin/quatation-product/') }}",
                type: "GET",
                data: { id: id },
                success: function (data) {
                    var pricee = data.price;
                    var idss = data.ids;
                    var stock = data.stock;
                    // alert(pricee);
                    // Set product price based on the selected product
                    $("#product_priceee" + currentCounter).val(pricee);

                    // Input event handler for quantity
                    $('#product_quantityyy' + currentCounter).on('input', function () {
                        var inputValue = parseFloat($(this).val()) || 0;
                        if (inputValue <= stock) {
                            calculateResult(currentCounter, pricee);
                        } else {
                            alert('Product current stock value is ' + stock + '. Please add fewer items.');
                            $(this).val(stock);
                            calculateResult(currentCounter, pricee);
                        }
                    });
                },
                error: function (data) {
                    console.log(data);
                }
            });
        });

        // Function to calculate and update result
        function calculateResult(currentCounter, productPrice) {
            var productQuantity = parseFloat($('#product_quantityyy' + currentCounter).val()) || 0;
            var result = (productPrice * productQuantity).toFixed(2);
            $('#resulttt' + currentCounter).val(result);

            // Calculate and update running total
            updateRunningTotal();
        }

        // Function to calculate and update running total
        // function updateRunningTotal() {
        //     var runningTotal = 0;
        //     $('.result').each(function() {
        //         runningTotal += parseFloat($(this).val()) || 0;
        //     });

        //     // Update the input field with the running total
        //     $('#running_total').val(runningTotal.toFixed(2));
        // }
        
        $(document).on('input', '#miscvaluee', function () {
            updateRunningTotal();
        });

         
          $(document).on('input', '.product_quantity', function () {
            updateRunningTotal();
        });
        
        
          function updateRunningTotal() {
            runningTotal = 0;
            $('.result').each(function () {
                var resultValue = parseFloat($(this).val()) || 0;
                runningTotal += resultValue;
            });

            // Add miscvalue to the total
            var miscvalue = parseFloat($('#miscvaluee').val()) || 0;
            runningTotal += miscvalue;

            $('#running_total').val(runningTotal.toFixed(2));
        }

        
        
        

        $(document).on('click', '.removeRow', function() {
            $(this).closest('#inputFormRow').remove();
            // Recalculate running total after removing a row
            updateRunningTotal();
        });

    });
</script>



<!-- ////////////////////////////////////////////////edit quote2 end//////////////////////////////////// -->


<!-- ////////////////////////////////////////////////add-purchase//////////////////////////////////// -->
<script>
$(document).ready(function() {
    $(".purchase_name").change(function() {
        var id = $(this).val();
        $.ajax({
            url: "{{ url('admin/purchase-product/') }}",
            type: "GET",
            data: { id: id },
            success: function(data) {
                var price = data.price;
                var stock = data.stock;

                // Set the values of the inputs
                $("#product_sku").val(price);

    
            },
            error: function(data) {
                console.log(data);
            }
        });
    });

});

</script>

<!-- ////////////////////////////////////////////////add-purchase-end//////////////////////////////////// -->



   <script type="text/javascript">
        $(document).ready(function() {
            var counter = 0;

            $('#addpurchaserow').click(function() {
                counter++;
             <?php
             $category = App\Models\Product::where('product_type','simple')->get(['id','title','sales_price']);
                    ?>
                var html = '';
                html += '<div id="inputFormRow">';
                html += '    <div class="input-group mb-3">';
                html += '        <div class="add-content">';
                html += '            <div class="add-content-flex second-add">';
                html += '                <div class="field d-flex">';
                html += '                     <div class="input__field">   <h2 class="input-heading">Product Name</h2>';
                html += '                  <select name="product_id[]" class="product purchase_name" id="product' + counter + '" required> <option value="">Select Products.....</option> @foreach($category as $s) <option value="{{$s->id}}">{{$s->title}}</option> @endforeach</select>';
                html += '                </div></div>';
                html += '            </div>';
                html += '            <div class="add-content-flex second-add">';
                html += '                <div class="field d-flex">';
                html += '                   <div class="input__field" id="input__field_abc_simple_product" ><h2 class="input-heading">Sku</h2>';
                html += '           <input id="product_sku' + counter + '" class="product_sku" type="text" placeholder="Product Sku" name="product_sku[]" required readonly> ';
                html += '                </div></div>';
                html += '            </div>';
                html += '            <div class="add-content-flex second-add">';
                html += '                <div class="field d-flex">';
                html += '                   <div class="input__field" id="input__field_abc_simple_product" ><h2 class="input-heading">Quantity</h2>';
                html += '           <input id="product_quantity' + counter + '" class="product_quantity" type="text" placeholder="Product qunatity" name="product_quantity[]" required > ';
                html += '                </div></div>';
                html += '            </div>';
                html += '            <div class="add-content-flex second-add">';
                html += '                <div class="field d-flex">';
                html += '                   <div class="input__field" id="input__field_abc_simple_product" ><h2 class="input-heading">Cost Price</h2>';
                html += '           <input id="cost' + counter + '" class="cost" type="text" placeholder="total cost" name="product_cost[]"  required > ';
                html += '                </div></div>';
                html += '            </div>';
                html += '            <div class="submit-btn">';
                html += '                <button type="button" class="new-btn remove-btn removeRow">Remove</button>';
                html += '            </div>';
                html += '        </div>';
                html += '    </div>';
                html += '</div>';

                $('#newRow').append(html);
                $('input[id="product' + counter + '"]').attr("required", "true");
                $('.product').select2();
            });

            $(document).on('change', '.purchase_name', function() {
                var id = $(this).val();
                var currentCounter = $(this).attr('id').replace('product', '');

                $.ajax({
                    url: "{{ url('admin/purchase-product/') }}",
                    type: "GET",
                    data: { id: id },
                    success: function(data) {
                        var pricee = data.price;
                        // Assuming you have received the SKU in the response
                        // Set the SKU value to the corresponding input
                        $("#product_sku" + currentCounter).val(pricee);

                        // Assuming you also need to update the quantity
                        // You can update other elements similarly if needed
                        // $("#product_quantity" + currentCounter).val(quantity);
                    },
                    error: function(data) {
                        console.log(data);
                    }
                });
            });

            $(document).on('click', '.removeRow', function() {
                $(this).closest('#inputFormRow').remove();
            });
        });
    </script>

<!-- ///////////////////////////////////////////edit purcahse start/////////////////////////////////////////////////// -->

<script type="text/javascript">
$(document).ready(function () {
    var counter = 1;

    // Event handler for product name change
    $(document).on('change', '.purchase_namee', function () {
        var id = $(this).val();
        var currentCounter = $(this).data('counter'); // Assuming you have a data attribute to store the counter

        $.ajax({
            url: "{{ url('admin/purchase-product/') }}",
            type: "GET",
            data: { id: id },
           success: function(data) {
                        var pricee = data.price;
                        // Assuming you have received the SKU in the response
                        // Set the SKU value to the corresponding input
                        $("#product_sku" + currentCounter).val(pricee);

                        // Assuming you also need to update the quantity
                        // You can update other elements similarly if needed
                        // $("#product_quantity" + currentCounter).val(quantity);
                    },
            error: function (data) {
                console.log(data);
            }
        });
    });


    // Trigger change event for product_namee when the page loads
    $('.purchase_namee').trigger('change');

});

$(document).on('click', '.removeRow', function () {
    $(this).closest('#inputFormRow').remove();
});

$(document).on('change', '.purchase_namee', function () {
    var id = $(this).val();
    var currentCounter = $(this).attr('id').replace('product', '');

    $.ajax({
        url: "{{ url('admin/purchase-product/') }}",
        type: "GET",
        data: { id: id },
    success: function(data) {
                        var pricee = data.price;
                        // Assuming you have received the SKU in the response
                        // Set the SKU value to the corresponding input
                        $("#product_sku" + currentCounter).val(pricee);

                        // Assuming you also need to update the quantity
                        // You can update other elements similarly if needed
                        // $("#product_quantity" + currentCounter).val(quantity);
                    },
        error: function (data) {
            console.log(data);
        }
    });
});

</script>
<!-- ////////////////////////////////////////////////edit purcahse end//////////////////////////////////// -->


<!-- ///////////////////////////////////////////edit purcahse start 2/////////////////////////////////////////////////// -->

<script type="text/javascript">
        $(document).ready(function() {
            var counter = 1;

            $('#addpurchaserow2').click(function() {
                counter++;
             <?php
             $category = App\Models\Product::where('product_type','simple')->get(['id','title','sales_price']);
                    ?>
                var html = '';
                html += '<div id="inputFormRow">';
                html += '    <div class="input-group mb-3">';
                html += '        <div class="add-content">';
                html += '            <div class="add-content-flex second-add">';
                html += '                <div class="field d-flex">';
                html += '                     <div class="input__field">   <h2 class="input-heading">Product Name</h2>';
                html += '                  <select name="product_id[]" class="product purchase_nameee" id="producttt' + counter + '" required> <option value="">Select Products.....</option> @foreach($category as $s) <option value="{{$s->id}}">{{$s->title}}</option> @endforeach</select>';
                html += '                </div></div>';
                html += '            </div>';
                html += '            <div class="add-content-flex second-add">';
                html += '                <div class="field d-flex">';
                html += '                   <div class="input__field" id="input__field_abc_simple_product" ><h2 class="input-heading">Sku</h2>';
                html += '           <input id="product_skuu' + counter + '" class="product_skuu" type="text" placeholder="Product Sku" name="product_sku[]" required readonly> ';
                html += '                </div></div>';
                html += '            </div>';
                html += '            <div class="add-content-flex second-add">';
                html += '                <div class="field d-flex">';
                html += '                   <div class="input__field" id="input__field_abc_simple_product" ><h2 class="input-heading">Quantity</h2>';
                html += '           <input id="product_quantityy' + counter + '" class="product_quantity" type="text" placeholder="Product qunatity" name="product_quantity[]" required > ';
                html += '                </div></div>';
                html += '            </div>';
                html += '            <div class="add-content-flex second-add">';
                html += '                <div class="field d-flex">';
                html += '                   <div class="input__field" id="input__field_abc_simple_product" ><h2 class="input-heading">Cost Price</h2>';
                html += '           <input id="costt' + counter + '" class="costt" type="text" placeholder="total costt" name="product_cost[]"  required > ';
                html += '                </div></div>';
                html += '            </div>';
                html += '            <div class="submit-btn">';
                html += '                <button type="button" class="new-btn remove-btn removeRow">Remove</button>';
                html += '            </div>';
                html += '        </div>';
                html += '    </div>';
                html += '</div>';

                $('#newRow').append(html);
                $('input[id="producttt' + counter + '"]').attr("required", "true");
                $('.product').select2();
            });

            $(document).on('change', '.purchase_nameee', function() {
                var id = $(this).val();
                var currentCounter = $(this).attr('id').replace('producttt', '');

                $.ajax({
                    url: "{{ url('admin/purchase-product/') }}",
                    type: "GET",
                    data: { id: id },
                    success: function(data) {
                        var pricee = data.price;
                        
                        // alert(pricee);
                        
                        // Assuming you have received the SKU in the response
                        // Set the SKU value to the corresponding input
                        $("#product_skuu" + currentCounter).val(pricee);

                        // Assuming you also need to update the quantity
                        // You can update other elements similarly if needed
                        // $("#product_quantity" + currentCounter).val(quantity);
                    },
                    error: function(data) {
                        console.log(data);
                    }
                });
            });

            $(document).on('click', '.removeRow', function() {
                $(this).closest('#inputFormRow').remove();
            });
        });
    </script>



<!-- ////////////////////////////////////////////////edit purcahse2 end//////////////////////////////////// -->
















<script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.0/sweetalert.min.js"></script>

<script type="text/javascript">

 $(document).on('click','#delete', function() {

     // $('#delete').click(function(event) {

          var id =  $(this).attr('data-id');
 
          swal({

              title: `Are you sure you want to delete this product?`,

              // text: "Se você excluir isso, ele desaparecerá para sempre.",

              icon: "warning",

              buttons: true,

              dangerMode: true,

          })

          .then((willDelete) => {

            if (willDelete) {

             var url = "{{url('admin/delete-product','')}}"+"/"+id;
             window.location.href=url;

            }

          });

      });

  

</script>

<script type="text/javascript">

 $(document).on('click','#delete_buton', function() {

     // $('#delete').click(function(event) {

          var id =  $(this).attr('data-id');
 
          swal({

              title: `Are you sure you want to delete this category?`,

              // text: "Se você excluir isso, ele desaparecerá para sempre.",

              icon: "warning",

              buttons: true,

              dangerMode: true,

          })

          .then((willDelete) => {

            if (willDelete) {

             var url = "{{url('admin/delete-category','')}}"+"/"+id;
             window.location.href=url;

            }

          });

      });

  

</script>


<script type="text/javascript">

 $(document).on('click','#logout_buton', function() {

     // $('#delete').click(function(event) {

          var id =  $(this).attr('data-id');
 
          swal({

              title: `Are you sure you want to Logout?`,

              // text: "Se você excluir isso, ele desaparecerá para sempre.",

              icon: "success",

              buttons: true,

              dangerMode: true,

          })
             .then((willDelete) => {

            if (willDelete) {

             var url = "{{url('logout')}}";
             window.location.href=url;

                 }

          });

      });

  

</script>




<script>
   
        $(document).on('click','#edit', function() {
            
    
          var id = $(this).attr('data-id');
        //   alert(id);

                $.ajax({
             url: "{{ url('admin/get-inventory/') }}" , 
             type: "GET",  
             dataType: 'json',
                        serverSide: 'true',
                        processing: true,
             data:{id:id},
             success:function(data)
                {
              var adjustment = data.adjustment_stock;
                    var current = data.current_stock;
                    var total = data.total_quantity;
            //   alert(id);
                     $('#current').val(current);
                       $('#adjustment').val(adjustment);
                       $('#id').val(id);
                       $('#total').val(total);
                       $('#location').val(data.store);
                    //   $(document).on('click','#add', function() {
                    //         $('#addminus').show();
                    //         var add = $(this).attr('data-id');
                            
                    //          $('#addminus').val(add);
                    //   });
                       
                    //     $(document).on('click','#minus', function() {
                    //         $('#addminus').show();
                    //         var minus = $(this).attr('data-id');
                            
                    //          $('#addminus').val(minus);
                    //   });
              },
          error: function (data) {
                console.log(data);
             }

        }); 
        //  window.location.href = url;
        
    });
</script>


 <script>
    
    
          $(document).on("click" , "#expenses_search" , function() {
                
             var expenses_Start_calenderDate = $('#expenses_Start_calenderDate').val();
                var expenses_End_calenderDate = $('#expenses_End_calenderDate').val();
         
                
                
                if ( expenses_Start_calenderDate == '') { 
                    
                    alert('please select the  calender field!');
                    return false;
                    
                } 
                else if(expenses_End_calenderDate == '') {
                    
                    alert('please select the calender field!'); 
                    return false;
                    
                } 
                else {
                    
                    $.ajax({
                        type:'GET',
                        url:"{{ url('admin/overview-filerdata-expenses') }}",
                        dataType: 'json',
                        serverSide: 'true',
                        processing: true,
                        data:{expenses_Start_calenderDate:expenses_Start_calenderDate,expenses_End_calenderDate:expenses_End_calenderDate},
                     
                            success:function(data){
                                
                                // alert(data.total_sales);
                                $('#expenses_Start_calenderDate').val('');
                                $('#expenses_End_calenderDate').val('');
                                var output = '';
                              
                                output +='<li><p>$'+' '+data.total_sales+'</p><span>gross sales in this period</span></li>';
                                output +='<li><p>$'+' '+data.average_sales+'</p><span>average gross daily sales</span></li>';
                                output +='<li><p>$'+' '+data.net_sales+'</p><span>net sales in this period</span></li>';
                                output +='<li><p>$'+' '+data.average_sales+'</p><span>average net daily sales</span></li>';
                                output +='<li><p>'+' '+data.total_orders+'</p><span>orders places</span></li>';
                                output +='<li><p>'+' '+data.total_items+'</p><span>items purchased</span></li>';
                                output +='<li><p>'+' '+data.total_refunds+'</p><span>refunded 0 orders (0 graph-list-items)</span></li>';
                                output +='<li><p>$'+' '+data.total_shipping+'</p><span>charged for shipping</span></li>';
                                output +='<li><p>$'+' '+data.total_discount+'</p><span>worth of coupens used</span></li>';

                                $('.filter-expenses').html(output);
                                
                                // alert(data.custom_month);

                    var labels = data.custom_month;

                    var lineData =data.custom_items;
                    var barData = data.custom_sales;

                    // Update the chart data
                    chart5.data.labels = labels;
                    chart5.data.datasets[0].data = lineData;
                    chart5.data.datasets[1].data = barData;

                    // Update the chart
                    chart5.update();    

               
        
                                                                     
                       }
            
                    });
                   
                }
                    
              
          });




      
    </script>




<script>
   
        $(document).on('click','#goo', function() {
            
     var adjustment = $('#adjustment').val();
                var current = $('#current').val();
         
                // alert(expenses_Start_calenderDate);
                
                if ( adjustment == '') { 
                    
                    alert('please enter adjustment stock!');
                    return false;
                    
                } 
                else if(current == '') {
                    
                    alert('please select the current stock!'); 
                    return false;
                    
                } else{
        
                $.ajax({
             url: "{{ url('admin/store-inventory') }}" , 
             type: "POST",  
             data:{adjustment:adjustment,current:current},
             success:function(data)
                {
              
              },
          error: function (data) {
                console.log(data);
             }

        }); 
                }
    
        
    });
</script>
<div class="modal fade" id="form" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header border-bottom-0">
        <h5 class="modal-title" id="exampleModalLabel">Manage Stock</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
       <form action="{{ url('admin/store-inventory')}}" method="POST">
                {{ csrf_field() }}
        <div class="modal-body">
          <div class="form-group">
               <input type="hidden" class="form-control" id="id"  name="id" style="display:none">
               <input type="hidden" class="form-control" id="location"  name="location" style="display:none">
               <input type="hidden" class="form-control" id="total"  name="total" style="display:none">
            <label for="email1">Current Stock</label>
            <input type="text" class="form-control" id="current" name="current" aria-describedby="emailHelp" placeholder="Current Stock">
           
          </div>
          <div class="form-group">
            <label for="password1">Adjustment Stock</label>
            <!--<input type="text" class="form-control" id="addminus"  name="addminus" style="display:none">-->
            <input type="text" class="form-control" id="adjustment" name="adjustment" placeholder="Enter adjustment amount">
            <!--<button type="button" class="btn btn-success" data-id="+" id="add">+</button>-->
            <!--<button type="button" class="btn btn-success" data-id="-"id="minus">-</button>-->
          </div>
        </div>
        <div class="modal-footer border-top-0 d-flex justify-content-center">
          <button type="submit" class="btn btn-success" id="goo">Submit</button>
        </div>
      </form>
    </div>
  </div>

</script> 
// <script>
//     $(document).ready(function()
// {
//     $("#cstore").change(function()
//     {
//         var id=$(this).val();
//         alert(id);
//         $.ajax({
//              url: "{{ url('admin/reports/') }}" , 
//              type: "GET",  
//              serverSide: 'true',
//              processing: true,
//              data:{id:id},
//              success:function(data)
//                 {
                   
                   
//                   // window.location.reload();
                   
//               },
//           error: function (data) {
//                 console.log(data);
//              }

//         }); 
       
   
//     });
 
// });
// </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.0/jquery.validate.min.js"></script>
<script>
if ($("#adduser").length > 0) {
    $("#adduser").validate({
       rules: {
        name:{
          required: true,
        },
        groupstore: {
            required: true,
            },
        description: {
            required: true,
            },  
        Sku:{
          required: true,
        },
        sales_price: {
            required: true,
            },
        image: {
            required: true,
            },
             sale_from: {
            required: true,
            },
             sale_to: {
            required: true,
            },
               retail_price: {
            required: true,
            },
             status: {
            required: true,
            },
       
      },
     messages: {
          name:{
          required: "Please enter name",
        },
        groupstore: {
           required: "Please select store",
          
          },
        description: {
           required: "Please enter description",
        
          },
        Sku: {
           required: "Please enter Sku",
          
          },
        sales_price: {
           required: "Please enter sales price",
        
          },
     image: {
           required: "Please select image",
        
          },
      sale_from: {
           required: "Please select start date",
        
          },
    sale_to: {
           required: "Please select end date",
        
          },
           retail_price: {
           required: "Please enter regular price",
        
          },
           status: {
           required: "Please select Status",
        
          },
      },
   })
} 
</script>
<script>
if ($("#edituser").length > 0) {
    $("#edituser").validate({
       rules: {
        name:{
          required: true,
        },
        groupstore: {
            required: true,
            },
        description: {
            required: true,
            },  
        Sku:{
          required: true,
        },
        sales_price: {
            required: true,
            },
        image: {
            required: true,
            },
             sale_from: {
            required: true,
            },
             sale_to: {
            required: true,
            },
               retail_price: {
            required: true,
            },
             status: {
            required: true,
            },
            total_quantity:{
                required: true,
            },
            
       
      },
     messages: {
          name:{
          required: "Please enter name",
        },
        groupstore: {
           required: "Please select store",
          
          },
        description: {
           required: "Please enter description",
        
          },
        Sku: {
           required: "Please enter Sku",
          
          },
        sales_price: {
           required: "Please enter sales price",
        
          },
     image: {
           required: "Please select image",
        
          },
      sale_from: {
           required: "Please select start date",
        
          },
    sale_to: {
           required: "Please select end date",
        
          },
           retail_price: {
           required: "Please enter regular price",
        
          },
           status: {
           required: "Please select Status",
        
          },
           total_quantity: {
           required: "Please enter qunatity",
        
          },
      },
   })
} 
</script>
<script>
if ($("#addcategory").length > 0) {
    $("#addcategory").validate({
       rules: {
        name:{
          required: true,
        },

        description: {
            required: true,
            },  
      
        // image: {
        //     required: true,
        //     },
            store:{
                required: true,
            }
       
      },
     messages: {
          name:{
          required: "Please enter name",
        },
       
        description: {
           required: "Please enter description",
        
          },
      
    //  image: {
    //       required: "Please select image",
        
    //       },
          store:{
              required: "Please select store",
          }
  
      },
   })
} 
</script>
<script>
if ($("#acategory").length > 0) {
    $("#acategory").validate({
       rules: {
        name:{
          required: true,
        },

        description: {
            required: true,
            },  
      
      
            store:{
                required: true,
            }
       
      },
     messages: {
          name:{
          required: "Please enter name",
        },
       
        description: {
           required: "Please enter description",
        
          },
      
   
          store:{
              required: "Please select store",
          }
  
      },
   })
} 
</script>

<!-- <script>
    $(document).on('click','#submit',function(){

   var name = $("#name").val();
   var email = $("#email").val();
      var quantity = $("#quantity").val();
         var date = $("#date").val();
            var user_id = $("#user_id").val();

   // if (name == '' ) {
   //   alert('Please fill required field');
   // }
   //  else if (email == '') {
   //    alert('Please fill required field');
   //  }


// alert(name);

    $.ajax({

    method:"GET",
    datatype:"json",
    url: "{{url('admin/quatation')}}",
            data:{
        name:name,
        email:email,
        quantity:quantity,
        date:date,
        user_id:user_id


            },
    success: function(data){
 
 alert(data);

}


});
});
</script>
 -->
 
 
<script>
   
        $(document).on('click','.test', function() {
            
     var adjustment = $(this).val();
     // alert(adjustment);
        //         var current = $('#current').val();
         
        //         // alert(expenses_Start_calenderDate);
                
        //         if ( adjustment == '') { 
                    
        //             alert('please enter adjustment stock!');
        //             return false;
                    
        //         } 
        //         else if(current == '') {
                    
        //             alert('please select the current stock!'); 
        //             return false;
                    
        //         } else{
        
        //         $.ajax({
        //      url: "{{ url('admin/store-inventory') }}" , 
        //      type: "POST",  
        //      data:{adjustment:adjustment,current:current},
        //      success:function(data)
        //         {
              
        //       },
        //   error: function (data) {
        //         console.log(data);
        //      }

        // }); 
        //         }
    
        
    });
</script>



 <script>
        // Add event listeners for the input fields
        document.getElementById('sales_price').addEventListener('input', compareInputs);
        document.getElementById('retail_price').addEventListener('input', compareInputs);

        function compareInputs() {
            // Get the values from the input fields
            var input1Value = parseFloat(document.getElementById('sales_price').value);
            var input2Value = parseFloat(document.getElementById('retail_price').value);

            // Check if the second input is higher than the first
           if (!isNaN(input1Value) && !isNaN(input2Value) && input2Value <= input1Value) {
                alert("Regular Price is always higher than Sales Price");
                // Reset the value of the second input
                // document.getElementById('retail_price').value = "";
            }
        }
    </script> 



